<!-- # GraphQl -->

# GraphQl

### Handlers
After generating the queries, mutations and REST endpoints, it is time to implement functions to serve those queries, mutations and REST enpoints.
This is how the syntax looks like:
```c#
public Task<SampleEntry[]> Handle(<Query class or record>)
```

The function name should be `Handle` and it should take an instance of the query class or record as a parameter
Let's take some examples:


#### Example 1

```c#
//The query
[Query<SampleEntry[]>()]
public record GetAllSamples(string text, int num);

//Its handler
public static Task<SampleEntry[]> Handle(GetAllSamples input){
    // implementation goes here
}
```




#### Example 2

```c#
//The mutation
[Mutation<CallResult>()]
public record AddSample(string text);

//Its handler
public static Task<CallResult> Handle(AddSample input){
    // implementation goes here
}
```


#### Example 3

```c#
//RESTful GET
[Rest<SampleEntry[]>("/api/entries/get", Verb.Get)]
public record GetAllSamples(string text, int num);

//Its handler
public static Task<SampleEntry[]> Handle(GetAllSamples input){
    // implementation goes here
}
```


#### Example 4

```c#
//RESTful POST
[Rest<CallResult>("/api/entries/add", Verb.Post)]
public record AddSample(string text);

//Its handler
public static Task<CallResult> Handle(AddSample input){
    // implementation goes here
}
```

<!-- #### Example 5

```c#
//The Subscription
[Subscription<SampleEntry>(name = "onUpdated", topic = "sampleUpdated")]
public record SampleUpdated(long sampleId);

//Its implementation
 public static string Handle(App.AutoGenerated.Domain.GetSubscriptionTopic<SampleCreated> input) => $"sampleCreated_{input.input.sampleId}";


```

#### Example 6

```c#
//The Subscription
[Subscription<SampleEntry>("willie")]
public record SampleCreated(long sampleId);

// Its implementation

 public static async Task<SampleEntry> Handle(GetSample input, [Service] ITopicEventSender topicEventSender)
 {
     var sample = new SampleEntry($"{input.text} {Random.Shared.Next()} {DateTime.UtcNow}", Random.Shared.Next());
     await topicEventSender.SendAsync("sampleUpdated", sample);
     await topicEventSender.SendAsync($"sampleCreated_{input.id}", sample);
     return sample;
 }
``` -->
